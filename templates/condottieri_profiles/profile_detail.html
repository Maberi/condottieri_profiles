{% extends 'condottieri_profiles/base.html' %}

{% load i18n %}
{% load avatar_tags %}
{# stars defined in machiavelli app #}
{% load condottieri_profiles_tags %}

{% block head_title %}{% trans "Profile" %}{% endblock %}

{% block body %}
<div class="section">
<h1>{% trans "Profile for" %} {{ profile.user.username }}
{% if is_friend %}
<img src="{{ STATIC_URL }}/condottieri_profiles/img/heart-red.png" />
{% endif %}
</h1>
<div id="profile_avatar">
{% avatar profile.user %}<br/>
{% if is_own %}
<a href="{% url avatar_change %}">{% trans "Change avatar" %}</a>
{% endif %}
</div>

<dl>
{% if profile.name %}
<dt>{% trans "Name" %}</dt>
<dd>{{ profile.name }}</dd>
{% endif %}
{% if 1 %}
<dt>{% trans "Awards" %}</dt>
<dd>
{% for b in profile.badges.all %}
	<img src="{{ b.image.url }}" title="{{ b.description }}"/>
{% endfor %}
</dd>
{% endif %}
{% if profile.about %}
<dt>{% trans "About" %}</dt>
<dd>{{ profile.about }}</dd>
{% endif %}
{% if profile.location %}
<dt>{% trans "Location" %}</dt>
<dd>{{ profile.location }}</dd>
{% endif %}
<dt>{% trans "Known languages" %}
{% if is_own %} (<a href="{% url profile_languages_edit %}">{% trans "Edit" %}</a>){% endif %}</dt>
<dd>{{ profile.spokenlanguage_set.all|join:", " }}</dd>
{% if profile.website %}
<dt>{% trans "Website" %}</dt>
<dd><a href="{{ profile.website }}">{{ profile.website }}</a></dd>
{% endif %}
<dt>{% trans "Karma" %}</dt>
<dd>{{ profile.karma|karma_stars }}
	{% if is_own %}
	({{ profile.karma }})
	{% endif %}
</dd>
<dt>{% trans "Total score" %}</dt>
<dd>{{ profile.total_score|score_stars }} ({{ profile.total_score }}
<a href="{% url ranking "user" profile.user.username %}">{% trans "Detail" %}</a>)
</dd>
<dt>{% trans "Average points per game" %}</dt>
<dd>{{ profile.average_score }}</dd>
<dt>{% trans "Ranking score" %}</dt>
<dd>{{ profile.weighted_score }}</dd>
<dt>{% trans "Times overthrown" %}</dt>
<dd>{{ profile.overthrows }}</dd>
	{% if not is_own %}
	<dt>{% trans "Friendship" %}</dt>
	{% if is_friend %}
		<dd>{% blocktrans with profile.user.username as user %}{{ user }} is your friend.{% endblocktrans %}
		(<a href="{% url change_friendship profile.user.username %}">{% trans "Unfriend" %}</a>)</dd>
	{% else %}
		<dd>{% blocktrans with profile.user.username as user %}{{ user }} is not your friend.{% endblocktrans %}
		(<a href="{% url change_friendship profile.user.username %}">{% trans "Befriend" %}</a>)</dd>
	{% endif %}
	{% if am_friend %}
		<dd>{% blocktrans with profile.user.username as user %}Your are a friend of {{ user }}.{% endblocktrans %}</dd>
	{% endif %}
	{% endif %}
</dl>

{% if is_own %}
	<p><a href="{% url profile_edit %}">{% trans "Edit" %}</a>.</p>
{% endif %}

</div>

<div class="section">
<h2>{% trans "Friends" %}</h2>
<ul class="friend_list">
{% for f in friends %}
	<li><a href="{% url profile_detail f.friend_to.username %}">{% avatar f.friend_to 24 %} {{ f.friend_to }}</a></li>
{% endfor %}
</ul>
<div class="clearboth"></div>
</div>

<div class="section">
<h2>{% trans "Friend of" %}</h2>
<ul class="friend_list">
{% for f in chosen_by %}
	<li><a href="{% url profile_detail f.friend_from.username %}">{% avatar f.friend_from 24 %} {{ f.friend_from }}</a></li>
{% endfor %}
</ul>
<div class="clearboth"></div>
</div>

{% endblock %}
